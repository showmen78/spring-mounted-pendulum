
<!-- saved from url=(0057)https://www.trinket-shell.com/18306fb9b073efd8/index.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <style>
        html, body {
          margin: 0;
          padding: 0;
        }
        div#glowscript {
          width: 100%;
          margin: 0 auto;
          text-align: center;
        }
        textarea#print {
          display: block;
          margin-top: 16px;
          margin-left: auto;
          margin-right: auto;
        }
        div#print-output {
          display: none;
          flex-direction: column;
          margin: 16px;
          padding: 8px;
          background-color: white;
          border: 1px solid #008aff;
        }
        </style>
        <link type="text/css" href="./jquery-ui.custom.css" rel="stylesheet">
        <link type="text/css" href="./ide.css" rel="stylesheet">
        <script type="text/javascript" src="./MathJax.js.download"></script>
        <script src="./jquery.min(2).js.download"></script>
<script src="./jquery-ui.custom.min.js.download"></script>
<script src="./reportScriptError-0.1.js.download"></script>
        <script type="text/javascript" src="./glow.3.2.2.min.js.download"></script><style type="text/css">.MathJax_Hover_Frame {border-radius: .25em; -webkit-border-radius: .25em; -moz-border-radius: .25em; -khtml-border-radius: .25em; box-shadow: 0px 0px 15px #83A; -webkit-box-shadow: 0px 0px 15px #83A; -moz-box-shadow: 0px 0px 15px #83A; -khtml-box-shadow: 0px 0px 15px #83A; border: 1px solid #A6D ! important; display: inline-block; position: absolute}
.MathJax_Hover_Arrow {position: absolute; width: 15px; height: 11px; cursor: pointer}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 2px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 2px 2em; background: transparent}
.MathJax_MenuArrow {position: absolute; right: .5em; color: #666666}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuRadioCheck {position: absolute; left: 1em}
.MathJax_MenuLabel {padding: 2px 2em 4px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #CCCCCC; margin: 4px 1px 0px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: Highlight; color: HighlightText}
.MathJax_Menu_Close {position: absolute; width: 31px; height: 31px; top: -15px; left: -15px}
</style><style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
#MathJax_ZoomFrame {position: relative; display: inline-block; height: 0; width: 0}
#MathJax_ZoomEventTrap {position: absolute; left: 0; top: 0; z-index: 302; display: inline-block; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style><style type="text/css">.MathJax_Preview {color: #888}
#MathJax_Message {position: fixed; left: 1em; bottom: 1.5em; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style><style></style>
        <script type="text/javascript" src="./RSrun.3.2.2.min.js.download"></script>
        <script type="text/javascript" src="./RScompiler.3.2.2.min.js.download"></script>
      </head>
      <body><div id="MathJax_Message" style="display: none;"></div>
        
        <div id="glowscript" style="clear: both;"><div style="white-space: pre;"></div><div style="white-space: pre;"></div><div class="glowscript-canvas-wrapper ui-resizable" style="display: inline-block; position: relative; height: 300px; float: none;"><canvas width="480" height="300" style="position: absolute; width: 480px; height: 300px;"></canvas><canvas width="480" height="300" style="position: relative; background-color: transparent; width: 480px; height: 300px;"></canvas><div class="ui-resizable-handle ui-resizable-e" style="z-index: 90;"></div><div class="ui-resizable-handle ui-resizable-s" style="z-index: 90;"></div><div class="ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se" style="z-index: 90;"></div></div><div style="white-space: pre;"></div><div id="graph0" class="glowscript-graph" style="width: 500px; height: 276px; float: none; padding: 0px; position: relative;"><canvas class="base" width="500" height="276"></canvas><canvas class="overlay" width="500" height="276" style="position: absolute; left: 0px; top: 0px;"></canvas><div class="tickLabels" style="font-size:smaller"><div class="xAxis x1Axis" style="color:rgb(0,0,0)"><div class="tickLabel" style="position:absolute;text-align:center;left:30px;top:233px;width:55px">0</div><div class="tickLabel" style="position:absolute;text-align:center;left:84px;top:233px;width:55px">0.3</div><div class="tickLabel" style="position:absolute;text-align:center;left:139px;top:233px;width:55px">0.5</div><div class="tickLabel" style="position:absolute;text-align:center;left:194px;top:233px;width:55px">0.8</div><div class="tickLabel" style="position:absolute;text-align:center;left:249px;top:233px;width:55px">1.0</div><div class="tickLabel" style="position:absolute;text-align:center;left:304px;top:233px;width:55px">1.3</div><div class="tickLabel" style="position:absolute;text-align:center;left:359px;top:233px;width:55px">1.5</div><div class="tickLabel" style="position:absolute;text-align:center;left:414px;top:233px;width:55px">1.8</div></div><div class="yAxis y1Axis" style="color:rgb(0,0,0)"><div class="tickLabel" style="position:absolute;text-align:right;top:218px;right:450px;width:24px">-20</div><div class="tickLabel" style="position:absolute;text-align:right;top:178px;right:450px;width:24px">-15</div><div class="tickLabel" style="position:absolute;text-align:right;top:138px;right:450px;width:24px">-10</div><div class="tickLabel" style="position:absolute;text-align:right;top:99px;right:450px;width:24px">-5</div><div class="tickLabel" style="position:absolute;text-align:right;top:59px;right:450px;width:24px">0</div><div class="tickLabel" style="position:absolute;text-align:right;top:20px;right:450px;width:24px">5</div></div></div></div></div>
        <div id="print-output"></div>

<script id="glowscript_source" type="text/plain">Web VPython 3.2


'''
sddot=R*sin(theta(t))**2*Derivative(theta(t), t)**2/cos(theta(t)) + R*cos(theta(t))*Derivative(theta(t), t)**2 + 
g - k*s(t)*sin(theta(t))**2/(m*cos(theta(t))**2) - k*s(t)/m

thetaddot=sin(theta(t))*Derivative(theta(t), t)**2/cos(theta(t)) - k*s(t)*sin(theta(t))/(R*m*cos(theta(t))**2)

'''
m= .2 #mass of bob
k=10 #spring constant
g= 10 #gravitation acceleration
lp=4 #pendulum string length
ls=4 #spring rest length

t=0 #time
dt=0.001


theta= -pi/6 #angle bob makes with the perpendicular line
thetadot= 0 # time derivative of theta
thetaddot=0 # 2nd order time derivative of theta

s=.6  # elongation of spring
sdot =0  #time derivative of s
sddot=0 # 2nd order time derivative of s

radius = 0.4 #radius of bob ,pivot and pivot1


#graphs for kinetic , potential and Total energy
g1 = graph(title='My Graph', xtitle='time', ytitle='energy',width=500,height=250)
KE = gcurve(color=color.green)
UE = gcurve(color=color.blue) #potential energy
TE = gcurve(color=color.red)

# red and the yellow pivot point
pivot= sphere(pos=vector(0,5,0),radius=radius,color=color.red)
pivot1=sphere(pos=vector(pivot.pos.x,pivot.pos.y-ls-s,pivot.pos.z+0),radius=radius,color=color.yellow)


#cartecian coordinate of bob
x= lp*sin(theta)
y= ls+s+lp*cos(theta)

#spring attatched to pivot and pivot1
spring= helix(pos=pivot.pos,axis=pivot1.pos-pivot.pos,color=color.green,radius=0.2,thickness=.07)
#bob
bob = sphere(pos=vector(x,pivot.pos.y-y,0),radius=radius,color=color.green,make_trail=False)
#string attatched to bob and pivot1
string = cylinder(pos=pivot1.pos,axis=bob.pos-pivot1.pos,radius=0.01)


while t<2:
  rate(1000)
  
  # thetaddot= thetadot**2*tan(theta)- k*s*sin(theta)/(m*lp*cos(theta)**2)
  # sddot = g-k*s/m + lp*thetaddot*sin(theta)+lp*thetadot**2*cos(theta)
  
  #calculation of thetaddot and sddot
  thetaddot=sin(theta)*thetadot**2/cos(theta) - k*s*sin(theta)/(lp*m*cos(theta)**2)
  sddot=lp*sin(theta)**2*thetadot**2/cos(theta) + lp*cos(theta)*thetadot**2 + g - k*s*sin(theta)**2/(m*cos(theta)**2) - k*s/m
  
  #updating sdot and s
  sdot += sddot*dt
  s+= sdot*dt
  
  #updating thetadot and theta
  thetadot += thetaddot*dt
  theta += thetadot*dt
  
  #updating pivot1 position and spring axis
  pivot1.pos.y = pivot.pos.y-ls-s
  spring.axis = pivot1.pos- pivot.pos
  
  #new position of bob
  x= lp*sin(theta)
  y= ls+s+lp*cos(theta)
  
  #updating bob position
  bob.pos= vector(x,pivot.pos.y-y,0)
  
  #updating string position
  string.pos = pivot1.pos
  string.axis = bob.pos- pivot1.pos
  
  bob.make_trail= True
  

  #calculating kinetic,potential and total energy
  ke= .5*m*(thetadot**2*lp**2-2*lp*thetadot*sdot*sin(theta)+sdot**2)
  ue= 0.5*k*s**2-m*g*(ls+s+lp*cos(theta))
  te= ke+ue
  #ploting graph
  KE.plot(t,ke)
  UE.plot(t,ue)
  TE.plot(t,te)
  


  
  t += dt
  
  

print('end')
  
  




</script>

        <script type="text/javascript">
          var prog = $('#glowscript_source').text()
            , compiled, main_func;

          // need to distinguish between 2.9 and <
          var floatVersion = parseFloat('3.2.2');

          if ('' === 'calculator' && ('3.2.2' === '3.2.2' || floatVersion > 3.2)) {
            $('#print-output').css('display', 'flex');
            window.addEventListener('message', function(e) {
              var data;

              try {
                data = JSON.parse(e.data);
              } catch(e) {}

              if (data && data['glowscript.print']) {
                var s = data['glowscript.print'];
                $('#print-output').append(s + "<br>");
              }
            });
          }

          async function runProgram(program) {
            try {
              eval(program);
              await __main__();
            } catch(err) {
              // todo: figure out why stack trace parsing doesn't work for newer version of GS
              var stack = reportScriptError(program, err, false);
              if (stack) {
                window.parent.postMessage(JSON.stringify({ "glowscript.error" : err.message + ' ' + stack, type : "runtime" }), "*");
              }
              else {
                window.parent.postMessage(JSON.stringify({ "glowscript.error" : err.message, type : "runtime" }), "*");
              }
            }
          }

          async function async_screenshot(scene) { // GlowScript 2.9 and later
            var img = await scene.__renderer.screenshot();
            var targetSize = 270;
            var aspect = img.width / img.height;
            var w = aspect >= 1 ? targetSize : targetSize * aspect;
            var h = aspect >= 1 ? targetSize / aspect : targetSize;
            var cvs = document.createElement("canvas");
            cvs.width = w;
            cvs.height = h;
            var cx = cvs.getContext('2d');
            cx.drawImage(img, 0, 0, w, h);
            var snapshot = cvs.toDataURL();
            window.parent.postMessage(JSON.stringify({ snapshot: snapshot }), "*");
          }

          try {
            compiled = window.glowscript_compile(prog, { lang : 'vpython', version : '3.2.2' });
          } catch(e) {
            window.parent.postMessage(JSON.stringify({ "glowscript.error" : e.message, type : "compile" }), "*");
          }

          $("#loading").remove()
          window.__context = {
            glowscript_container : $('#glowscript')
          };

          if (floatVersion >= 2.9) {
            runProgram(compiled);
          }
          else {
            if (compiled) {
              try {
                main_func = eval(compiled);
                window.userMain = main_func;

                if (window.userMain && typeof window.userMain === "function") {
                  window.userMain(function(err) {
                    if (err) {
                      var stack = reportScriptError(compiled, err)
                      if (stack) {
                        window.parent.postMessage(JSON.stringify({ "glowscript.error" : err.message + ' ' + stack, type : "runtime" }), "*");
                      }
                      else {
                        window.parent.postMessage(JSON.stringify({ "glowscript.error" : err.message, type : "runtime" }), "*");
                      }
                    }
                  });
                }
              } catch(err) {
                var stack = reportScriptError(compiled, err);
                if (stack) {
                  window.parent.postMessage(JSON.stringify({ "glowscript.error" : err.message + ' ' + stack, type : "runtime" }), "*");
                }
                else {
                  window.parent.postMessage(JSON.stringify({ "glowscript.error" : err.message, type : "runtime" }), "*");
                }
              }
            }
          }

          window.addEventListener('message', function(e) {
            if (e.data === "glowscript.snapshot") {
              var scene = window.scene;
              if (!scene) {
                for (var c = 0; c < canvas.activated.length; c++) {
                  if (canvas.activated[c] !== null) {
                    scene = canvas.activated[c];
                    break;
                  }
                }
              }
              if (scene) {
                if (parseFloat('3.2.2') >= 2.9) {
                  async_screenshot(scene);
                }
                else {
                  (scene.__renderer || scene.renderer).screenshot(function (err, img) {
                    if (!err) {
                      $(img).load(function () {
                        // Rescale the image to 128px max dimension and save it as a screenshot
                        var targetSize = 270;
                        var aspect = img.width / img.height;
                        var w = aspect >= 1 ? targetSize : targetSize * aspect;
                        var h = aspect >= 1 ? targetSize / aspect : targetSize;

                        var canvas = document.createElement("canvas");
                        canvas.width = w;
                        canvas.height = h;
                        var cx = canvas.getContext('2d');
                        cx.drawImage(img, 0, 0, w, h);
                        var snapshot = canvas.toDataURL("image/png");

                        window.parent.postMessage(JSON.stringify({ snapshot: snapshot }), "*");
                      });
                    }
                  });
                }
              }
              else {
                var glowscript_graph = $.find('.glowscript-canvas-wrapper canvas');
                if (glowscript_graph[0] && typeof glowscript_graph[0].toDataURL == "function") {
                  var snapshot = glowscript_graph[0].toDataURL("image/png");
                  window.parent.postMessage(JSON.stringify({ snapshot: snapshot }), "*");
                }
              }
            }
          });
        </script>
      
    
  <div><textarea id="print" spellcheck="false" readonly="readonly" style="font-family: Verdana; font-size: 100%; width: 640px; height: 100px;"></textarea></div></body></html>